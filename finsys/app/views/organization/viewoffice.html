<div class="content-container" ng-controller="ViewOfficeController">
    <ul class="breadcrumb">
        <!--li><a href="#/organization">{{'label.anchor.organization' | translate}}</a></li-->
        <li><a href="#/offices?isOutlet={{isOutlet}}">{{isOutlet ? 'label.anchor.manageoutlets' : 'label.anchor.manageoffices' | translate}}</a></li>
        <li class="active">{{office.name}}</li>
    </ul>
    <div class="card">
        <div class="content">
            <uib-tabset class="overflowhidden marginbottom0 scrollable" tabset-name="officeTabset" scrollable>

                <uib-tab heading="Cards Summary">
                    <div class="container-fluid">
                        <div class="col-md-12 col-sm-12">
                            <div class="row primarydiv">
                                <!--<div class="pull-right">
                                    <div class="btn-group">
                                        <a href="#/editoffice/{{office.id}}?isOutlet={{isOutlet}}" class="btn btn-primary" has-permission='UPDATE_OFFICE'><i class="fa fa-edit "></i>&nbsp;&nbsp;{{
                                            'label.button.edit' | translate }}</a>
                                    </div>
                                </div> -->
                            </div>

                            <h3><strong>{{office.name}}</strong></h3>
                            <!--<table class="table-bordered table view-table" style="width: 350px">
                                <tr>
                                    <td> Unallocated Cards</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td> Allocated Cards</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td> Stopped Cards</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td> Profile Balance</td>
                                    <td> R</td>
                                </tr>

                            </table> -->

                            <div class="row">
                                <div class="col-md-3 col-xl-3">
                                    <div class="micard bg-c-blue order-card">
                                        <div class="card-block">
                                            <h6 class="m-b-20">Profile Balance</h6>
                                            <h2 class="text-right"><i class="fa fa-money f-left"></i><span>R {{profileBalance}}</span></h2>
                                            <p class="m-b-0">Profile<span class="f-right">Balance</span></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3 col-xl-3">
                                    <div class="micard bg-c-green order-card">
                                        <div class="card-block">
                                            <h6 class="m-b-20">Allocated Cards</h6>
                                            <h2 class="text-right"><i class="fa fa-credit-card f-left"></i><span>{{profileSummary.allocated}}</span></h2>
                                            <p class="m-b-0">Total Allocated <span class="f-right">Cards</span></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3 col-xl-3">
                                    <div class="micard bg-c-yellow order-card">
                                        <div class="card-block">
                                            <h6 class="m-b-20">UnAllocated Cards</h6>
                                            <h2 class="text-right"><i class="fa fa-credit-card f-left"></i><span>{{profileSummary.unallocated}}</span></h2>
                                            <p class="m-b-0">UnAllocated <span class="f-right">Cards</span></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3 col-xl-3">
                                    <div class="micard bg-c-pink order-card">
                                        <div class="card-block">
                                            <h6 class="m-b-20">Stopped Cards</h6>
                                            <h2 class="text-right"><i class="fa fa-credit-card f-left"></i><span>{{profileSummary.stoppedCard}}</span></h2>
                                            <p class="m-b-0">Total Stopped <span class="f-right">Cards</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </uib-tab>

                <uib-tab heading="{{'label.heading.general' | translate}}">
                    <div class="container-fluid">
                        <div class="col-md-12 col-sm-12">
                            <div class="row primarydiv">
                                <div class="pull-right">
                                    <div class="btn-group">
                                        <a href="#/editoffice/{{office.id}}?isOutlet={{isOutlet}}" class="btn btn-primary" has-permission='UPDATE_OFFICE'><i class="fa fa-edit "></i>&nbsp;&nbsp;{{
                                            'label.button.edit' | translate }}</a>
                                    </div>
                                </div>
                            </div>

                            <h3><strong>{{office.name}}</strong></h3>
                            <table class="table-bordered table view-table" style="width: 350px">
                                <tr>
                                    <td>{{ 'label.heading.parentoffice' | translate }}</td>
                                    <td>{{office.parentName}}</td>
                                </tr>
                                <tr>
                                    <td>{{ 'label.heading.openedon' | translate }}</td>
                                    <td>{{office.openingDate | DateFormat}}</td>
                                </tr>
                                <tr>
                                    <td>{{ 'label.heading.namedecorated' | translate }}</td>
                                    <td>{{office.nameDecorated | DotRemove}}</td>
                                </tr>
                                <tr>
                                    <td>{{ isOutlet ? 'label.heading.outletcode' : 'label.heading.externalid' | translate }}</td>
                                    <td>{{office.externalId}}</td>
                                </tr>
                                <tr>
                                    <td>Profile Number</td>
                                    <td>{{office.profile_no}}</td>
                                </tr>
                                <tr>
                                    <td>{{isOutlet ? 'label.heading.outlettype' : 'label.heading.officetype' | translate}}</td>
                                    <td>{{office.officeType}}</td>
                                </tr>
                                <tr>
                                    <td>Nearest Branch</td>
                                    <td>{{office.nearestBranchName}}</td>
                                </tr>

                                <tr>
                                    <td>Company CC Number</td>
                                    <td>{{office.compCCNumber}}</td>
                                </tr>

                                <tr>
                                    <td>VAT Number</td>
                                    <td>{{office.vatNo}}</td>
                                </tr>

                                <tr>
                                    <td>Contact Number</td>
                                    <td>{{office.contactNo}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </uib-tab>

                <uib-tab heading="{{officedatatable.registeredTableName}}" ng-repeat="officedatatable in officedatatables"
                     select="dataTableChange(officedatatable)" has-permission='READ_{{officedatatable.registeredTableName}}'>
                    <div>
                        <div class="form-group pull-right">
                            <a data-ng-show="showDataTableAddButton"
                               ng-href="#/makedatatableentry/{{officedatatable.registeredTableName}}/{{office.id}}?fromEntity=office"
                               class="btn btn-primary" has-permission='CREATE_{{officedatatable.registeredTableName}}'><i
                               class="fa fa-plus "></i>&nbsp;&nbsp;{{'label.button.add' | translate}}</a>
                            <a data-ng-show="showDataTableEditButton"
                               ng-href="#/viewsingledatatableentry/{{officedatatable.registeredTableName}}/{{office.id}}?mode=edit"
                               class="btn btn-primary" has-permission='UPDATE_{{officedatatable.registeredTableName}}'><i
                               class="fa fa-edit "></i>&nbsp;&nbsp;{{'label.button.edit' | translate}}</a>
                            <a ng-show="datatabledetails.isData" class="btn btn-danger"
                               ng-click="deleteAll(officedatatable.registeredTableName, office.id)" has-permission='DELETE_{{officedatatable.registeredTableName}}'><i
                               class="fa fa-trash-o"></i>&nbsp;&nbsp;{{'label.button.deleteall' | translate}}</a>
                        </div>
                        <br>
                        <br>

                        <div ng-show="datatabledetails.isData">
                            <table class="table" data-ng-show="datatabledetails.isMultirow">
                                <thead>
                                <th ng-repeat="column in datatabledetails.columnHeaders">{{column.columnName | prettifyDataTableColumn}}</th>
                                </thead>
                                <tbody>
                                <tr class="pointer-main" ng-repeat="data in datatabledetails.data">
                                    <td class="pointer" ng-repeat="row in data.row track by $index"
                                        ng-click="viewDataTable(officedatatable.registeredTableName,data)">{{row}}
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="table table-bordered width450px" data-ng-hide="datatabledetails.isMultirow">
                                <tr ng-repeat="value in singleRow">
                                    <td class="graybg table-font-nav">{{value.key | prettifyDataTableColumn}}</td>
                                    <td><span class="padded-td">{{value.value}}</span></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </uib-tab>
                <uib-tab ng-show="enableAddress" heading="{{'label.heading.address' | translate}}" >
                        <!--<fieldset>-->
                        <!-- <div ng-controller="AddressController">-->
                                <div ng-if="enableAddress">
                                        <br>
                                        <button ng-if= "addresses.length == 0" class="btn btn-primary pull-right" ng-click="routeTo()"><i class="icon-plus icon-white"></i>{{'label.button.addAddress' | translate}}</button>
						                <br>
                                        <table class="table" ng-repeat="address in addresses"  class="table table-condensed">
                                            <thead>
                                            <tr class="graybg">
                                                <th class="graybg"> {{address.addressType}}</th>
                                                <td  >
                                                    <button  ng-click="ChangeAddressStatus(address.client_id,address.isActive,address.addressId)" data-ng-hide="address.isActive" class="btn btn-primary">
                                                        {{"label.button.enable" | translate}}
                                                    </button>
                                                    <button ng-click="ChangeAddressStatus(address.client_id,address.isActive,address.addressId)"  data-ng-show="address.isActive" class="btn btn-primary">
                                                        {{"label.button.disable" | translate}}
                                                    </button>
                                                    <button class="btn btn-primary pull-right" ng-click="routeToEdit(address.addressTypeId,address.addressId)"><i class="icon-plus icon-white"></i>{{'label.button.edit' | translate}}</button>
                                                </td>
                
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-show="view.street">
                                                <th >
                                                    {{'label.input.street' | translate }}
                                                </th>
                                                <td>
                                                    {{address.street}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.addressLine1">
                                                <th>
                                                    {{'label.input.addressline1' | translate }}
                                                </th>
                                                <td>
                                                    {{address.addressLine1}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.addressLine2">
                                                <th >
                                                    {{'label.input.addressline2' | translate }}
                                                </th>
                                                <td>
                                                    {{address.addressLine2}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.addressLine3">
                                                <th >
                                                    {{'label.input.addressline3' | translate }}
                                                </th>
                                                <td>
                                                    {{address.addressLine3}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.city">
                                                <th >
                                                    {{ 'label.input.city' | translate }}
                                                </th>
                                                <td>
                                                    {{address.city}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.townVillage">
                                                <th >
                                                    {{'label.input.town_village' | translate }}
                                                </th>
                                                <td>
                                                    {{address.townVillage}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.countyDistrict">
                                                <th >
                                                    {{ 'label.input.county_district' | translate }}
                                                </th>
                                                <td>
                                                    {{address.countyDistrict}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.stateProvinceId">
                                                <th>
                                                    {{ 'label.input.state_province' | translate }}
                                                </th>
                                                <td>
                                                    {{address.stateName}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.countryId">
                                                <th >
                                                    {{ 'label.input.country' | translate }}
                                                </th>
                                                <td>
                                                    {{address.countryName}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.postalCode">
                                                <th >
                                                    {{ 'label.input.postal_code' | translate }}
                                                </th>
                                                <td>
                                                    {{address.postalCode}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.latitude">
                                                <th >
                                                    {{ 'label.input.latitude' | translate }}
                                                </th>
                                                <td>
                                                    {{address.latitude}}
                                                </td>
                
                                            </tr>
                                            <tr ng-show="view.longitude">
                                                <th >
                                                    {{ 'label.input.longitude' | translate }}
                                                </th>
                                                <td>
                                                    {{address.longitude}}
                                                </td>
                                            </tr>
                                            <tr ng-show="view.isActive">
                                                <th>
                                                    {{'label.input.is_active' | translate}}
                                                </th>
                                                <td>
                                                    {{address.isActive}}
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                
                                    </div>
                                    <br><br>
                    </uib-tab>

                <uib-tab heading="Bulk cards Load / Deduct">
                    <div class="container-fluid">
                        <div class="col-md-12 col-sm-12">
                        </div>
                        <h3><strong>{{office.name}}</strong></h3>

                        <div class="row col-md-12 col-sm-12">
                            <label class="control-label col-sm-4">Select .csv File to Upload<span
                                    class="required">*</span></label>
                            <div class="col-sm-6">
                                <input type="file" id="file" accept=".csv" class="form-control btn btn-default" name="file" ng-model="formData.file"
                                       ngf-select="onFileSelect($files)">
                            </div>
                            <!--<div class="col-sm-3">
                                <button style="margin-left:10px;" type="button" class="form-control btn btn-primary col-sm-2 ng-binding" ng-click="upload()">
                                    Upload
                                </button>
                            </div> -->
                            <br>
                            <div class="head-affix">
                                <br>
                                <table class="table condensed-table">
                                    <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>File Name</th>
                                        <th>Date Uploaded</th>
                                        <th>Details</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr class="pointer-main ng-scope" ng-repeat="Cards in uploadedBatch">
                                        <td>{{Cards.id}}</td>
                                        <td>{{Cards.filename}}</td>
                                        <td>{{Cards.uploaded_date}}</td>
                                        <td>{{Cards.details}}</td>
                                        <td>
                                            <button type="button" class="btn btn-primary" data-ng-click="deductLoadFunc($event,Cards.id)" value="{{Cards.id}}" ng-model="approveTemplate[Cards.id]" id="cancel">Cancel</button>
                                            <button type="button" class="btn btn-primary" data-ng-click="deductLoadFunc($event,Cards.id)" value="{{Cards.id}}" ng-model="approveTemplate[Cards.id]" id="loadcard">Pay</button>
                                            <button type="button" class="btn btn-primary" data-ng-click="deductLoadFunc($event,Cards.id)" value="{{Cards.id}}" ng-model="approveTemplate[Cards.id]" id="deductcard">Deduct</button>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <th>ID</th>
                                        <th>File Name</th>
                                        <th>Date Uploaded</th>
                                        <th>Details</th>
                                        <th></th>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </uib-tab>

            </uib-tabset>
        </div>
    </div>
</div>

<!--<style type="text/css">
    .order-card {
        color: #fff;
    }

    .bg-c-blue {
        background: linear-gradient(45deg,#4099ff,#73b4ff);
    }

    .bg-c-green {
        background: linear-gradient(45deg,#2ed8b6,#59e0c5);
    }

    .bg-c-yellow {
        background: linear-gradient(45deg,#FFB64D,#ffcb80);
    }

    .bg-c-pink {
        background: linear-gradient(45deg,#FF5370,#ff869a);
    }


    .micard {
        border-radius: 5px;
        -webkit-box-shadow: 0 1px 2.94px 0.06px rgba(4,26,55,0.16);
        box-shadow: 0 1px 2.94px 0.06px rgba(4,26,55,0.16);
        border: none;
        margin-bottom: 30px;
        -webkit-transition: all 0.3s ease-in-out;
        transition: all 0.3s ease-in-out;
    }

    .micard .card-block {
        padding: 25px;
    }

    .order-card i {
        font-size: 26px;
    }

    .f-left {
        float: left;
    }

    .f-right {
        float: right;
    }
</style> -->